<!DOCTYPE html>
<html lang=zh-CN>
    <head>
        <meta charset=utf-8>
        <meta http-equiv=X-UA-Compatible content="IE=edge">
        <title>promise</title>
    </head>
    <body>
        <div>
            <button id="pasteBtn">粘贴</button>
        </div>
        <div>
            <input type="text" id="pasteInput">
            <div id="pasteInput" contenteditable="true" style="width: 200px;height: 200px;"></div>
        </div>
    </body>
    <script>
        const pasteBtn = document.querySelector('#pasteBtn');
        const pasteInput = document.querySelector('#pasteInput');

        // var pasteEvt = new Event('paste');
        // pasteEvt.clipboardData = pasteEvt.clipboardData || {};
        // pasteEvt.clipboardData.getData = function() {
        //     return 'resultText';
        // };

        pasteBtn.onclick = function (argument) {
            console.log('pasteInput', pasteInput);
            // console.log('pasteEvt', pasteEvt);

            // 使用'paste'类型创建一个新的ClipboardEvent
            const pasteEvent = new ClipboardEvent('paste');

            // 在pasteInput元素上触发paste事件
            pasteInput.dispatchEvent(pasteEvent);

            pasteInput.focus();
            // pasteInput.dispatchEvent(pasteEvt)
        }

        const event = new Event('click');
        pasteBtn.dispatchEvent(event);
    </script>
</html>





<!-- <!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <title>contenteditable</title>
    <style>
        *{
            margin:0;padding:0;
        }
        .im-message-area{
            width:98%;
            padding:2px;
            height:75px;
            border:#000 solid 1px;
            background:#fff;
            font:12px/20px arial,"\5b8b\4f53";
            word-wrap:break-word;
            overflow-y:auto;
            line-height:1;
        }
        .ul{display:none;}
        .ul li{
            background-color:#CCC;
            width:50px;
        }
    </style>
</head>

<body>
    <div contenteditable="true" id="im_message_area" class="im-message-area"><br></div>
    <a href="javascript:void(0)" id="button">按钮</a>
    <ul class="ul">
        <li>(笑)</li>
        <li>(哭)</li>
        <li>(乐)</li>
    </ul>
</body>
<script language="javascript" type="text/javascript">
    function inimage(text) {
        var obj = $(".im-message-area")[0];
        var range, node;
        if (!obj.hasfocus) {
            obj.focus();
        }
        if (window.getSelection && window.getSelection().getRangeAt) {
            range = window.getSelection().getRangeAt(0);
            range.collapse(false);
            node = range.createContextualFragment(text);
            var c = node.lastChild;
            range.insertNode(node);
            if (c) {
                range.setEndAfter(c);
                range.setStartAfter(c)
            }
            var j = window.getSelection();
            j.removeAllRanges();
            j.addRange(range);
            console.log('range', range);
            console.log('window.getSelection', window.getSelection());
        } else if (document.selection && document.selection.createRange) {
            document.selection.createRange().pasteHTML(text);
        }
    }
    $(document).ready(function() {
        $('#button').click(function() {
            $('.ul').show();
        })
        $('.ul li').each(function() {
            $(this).click(function() {
                inimage($(this).text());
            })
        })
    });
</script>
</html> -->
